(function(){"use strict";function c(o,t){let e=0;const s=new Float32Array(o,e,t);e+=t*4;const p=new Float32Array(o,e,t);e+=t*4;const u=new Float32Array(o,e,t);e+=t*4;const y=new Float32Array(o,e,t);e+=t*4;const w=new Uint8Array(o,e,t);e+=t;const I=new Uint8Array(o,e,t);e+=t;const A=new Uint8Array(o,e,t);return{posX:s,posY:p,posZ:u,rotation:y,type:w,owner:I,active:A}}let l=null,n=0,r=null,a=null;self.onmessage=o=>{const{type:t,data:e}=o.data;if(console.log("[SimulationWorker] Message reçu:",t),t==="INIT"){if(l=e.buffer,n=e.maxUnits,!l||n<=0){postMessage({type:"ERROR",message:"Invalid INIT payload"});return}r=c(l,n),console.log("[SimulationWorker] Initialisé avec",n,"unités"),postMessage({type:"INIT_ACK",data:{maxUnits:n}}),a!==null&&clearInterval(a),a=setInterval(()=>i(),Math.floor(1e3/60))}};function i(o){if(!r||!n)return;const{active:t}=r;for(let e=0;e<n;e++)t[e]}})();
